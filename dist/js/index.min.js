/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ 985:
/***/ (function(__unused_webpack___webpack_module__, __unused_webpack___webpack_exports__, __webpack_require__) {

/* harmony import */ var _modules_timer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(920);
/* harmony import */ var _modules_controls_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(377);
/* harmony import */ var _modules_renderElements_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(615);
/* harmony import */ var _modules_serviceAPI_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63);




const init = async () => {
  (0,_modules_timer_js__WEBPACK_IMPORTED_MODULE_0__/* .findTimer */ .J)();
  (0,_modules_controls_js__WEBPACK_IMPORTED_MODULE_1__/* .controlModalMenu */ .ud)();
  await (0,_modules_serviceAPI_js__WEBPACK_IMPORTED_MODULE_2__/* .getArticles */ .Zz)(_modules_renderElements_js__WEBPACK_IMPORTED_MODULE_3__/* .renderArticles */ .Ej, _modules_renderElements_js__WEBPACK_IMPORTED_MODULE_3__/* .renderPagination */ .fF, _modules_controls_js__WEBPACK_IMPORTED_MODULE_1__/* .controlPagination */ .To, _modules_controls_js__WEBPACK_IMPORTED_MODULE_1__/* .controlArrows */ .ec);
  await (0,_modules_serviceAPI_js__WEBPACK_IMPORTED_MODULE_2__/* .getArticle */ .fq)(_modules_renderElements_js__WEBPACK_IMPORTED_MODULE_3__/* .renderArticle */ .vf);
};
init();

/***/ }),

/***/ 588:
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: function() { return /* binding */ API_URL; }
/* harmony export */ });
const API_URL = 'https://gorest.co.in/public-api';

/***/ }),

/***/ 377:
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   To: function() { return /* binding */ controlPagination; },
/* harmony export */   ec: function() { return /* binding */ controlArrows; },
/* harmony export */   ud: function() { return /* binding */ controlModalMenu; }
/* harmony export */ });
/* harmony import */ var _renderElements_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(615);


// управление пагинацией
const controlPagination = ({
  page
}) => {
  const paginationLinks = document.querySelectorAll('.pagination__page');
  paginationLinks && paginationLinks.forEach(link => {
    if (+link.innerText === page) {
      link.classList.add('is-active');
    } else {
      link.classList.remove('is-active');
    }
  });
};
const disableArrow = arrow => {
  arrow.classList.add('is-disabled');
  arrow.addEventListener('click', e => {
    e.preventDefault();
  });
};
const enableArrow = arrow => {
  arrow.classList.remove('is-disabled');
};

// управление стрелками пагинации
const controlArrows = ({
  pages: pagesTotal,
  page
}) => {
  const arrowLeft = document.querySelector('.pagination__left');
  const arrowRight = document.querySelector('.pagination__right');
  if (arrowLeft) {
    if (page === 1) {
      disableArrow(arrowLeft);
    } else {
      enableArrow(arrowLeft);
    }
  }
  if (arrowRight) {
    if (page === pagesTotal) {
      disableArrow(arrowRight);
    } else {
      enableArrow(arrowRight);
    }
  }
};

// Управление кнопкой меню

const controlModalMenu = () => {
  const menuBtn = document.querySelector('.header__menu-button');
  const modalMenu = (0,_renderElements_js__WEBPACK_IMPORTED_MODULE_0__/* .renderModal */ .rx)();
  menuBtn.addEventListener('click', () => {
    document.body.append(modalMenu);
    modalMenu.classList.toggle('show-modal');
    menuBtn.style.backgroundImage = modalMenu.classList.contains('show-modal') ? 'url(./imgs/menu-close.svg)' : 'url(./imgs/menu-open.svg)';
  });
  modalMenu.addEventListener('click', ({
    target
  }) => {
    if (target.closest('.modal__link')) {
      modalMenu.classList.remove('show-modal');
      menuBtn.style.backgroundImage = 'url(./imgs/menu-open.svg)';
    }
  });
};

/***/ }),

/***/ 615:
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ej: function() { return /* binding */ renderArticles; },
/* harmony export */   fF: function() { return /* binding */ renderPagination; },
/* harmony export */   rx: function() { return /* binding */ renderModal; },
/* harmony export */   vf: function() { return /* binding */ renderArticle; }
/* harmony export */ });
/* harmony import */ var _serviceAPI_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63);

const renderArticles = data => {
  const articlesList = document.querySelector('.blog__list');
  const articles = data.map(({
    id,
    title
  }) => {
    const articleItem = document.createElement('li');
    articleItem.classList.add('blog__item');
    articleItem.innerHTML = `
            <a class="blog__link" href="article.html?id=${id}">
                <img class="blog__image" src="./imgs/no-image.jpg"
                    alt="фото" width="195" height="195">
                <div class="blog__info">
                    <p class="blog__title" title="${title}">
                        ${title}
                    </p>
                    <p class="blog__date">22 октября 2021, 12:45</p>
                    <div class="blog__data">
                        <div class="blog__views">
                            <img class="blog__views-icon" 
                            src="./imgs/icons_eye.svg" alt="icon-eye">
                            <span class="blog__views-num">1.2K</span>
                        </div>
                        <div class="blog__comments">
                            <img class="blog__comments-icon" 
                            src="./imgs/chat.svg" alt="comments">
                            <span class="blog__comments-num">0</span>
                        </div>
                    </div>
                </div>
            </a>
        `;
    return articleItem;
  });
  articlesList && articlesList.append(...articles);
};
const renderPagination = ({
  pages: pagesTotal,
  page
}) => {
  const paginationGroup = document.querySelector('.blog__pagination');
  let previousPage;
  let currentPage;
  let nextPage;
  switch (page) {
    case 1:
      previousPage = page;
      currentPage = page + 1;
      nextPage = page + 2;
      break;
    case pagesTotal:
      previousPage = page - 2;
      currentPage = page - 1;
      nextPage = page;
      break;
    default:
      previousPage = page - 1;
      currentPage = page;
      nextPage = page + 1;
      break;
  }
  if (paginationGroup) {
    paginationGroup.innerHTML = `
        <a class="pagination__left" href="blog.html?page=${page - 1}">
            <svg width="37" height="37" viewBox="0 0 37 37" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_0_255)">
                    <path d="M32.375 16.9583H10.5296L16.0487 
                    11.4237L13.875 9.25L4.625 18.5L13.875 
                    27.75L16.0487 25.5763L10.5296 20.0417H32.375V16.9583Z"/>
                </g>
                <defs>
                    <clippath id="clip0_0_255">
                        <rect width="37" height="37" fill="white" />
                    </clippath>
                </defs>
            </svg>
        </a>
        <div class="pagination__pages">
            <a class="pagination__page" 
                href="blog.html?page=${previousPage}">
                ${previousPage}
            </a>
            <a class="pagination__page" 
                href="blog.html?page=${currentPage}">
                ${currentPage}
            </a>
            <a class="pagination__page" href="blog.html?page=${nextPage}">
                ${nextPage}
            </a>
        </div>
        <a class="pagination__right" href="blog.html?page=${page + 1}">
            <svg width="37" height="37" viewBox="0 0 37 37" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_0_258)">
                    <path d="M4.625 16.9583H26.4704L20.9513 11.4237L23.125 
                    9.25L32.375 18.5L23.125 27.75L20.9513 25.5763L26.4704
                    20.0417H4.625V16.9583Z"/>
                </g>
                <defs><clippath id="clip0_0_258">
                        <rect width="37" height="37" fill="white" 
                        transform="matrix(-1 0 0 1 37 0)" />
                    </clippath>
                </defs>
            </svg>
        </a>
    `;
  }
};
const renderArticle = async ({
  user_id: userId,
  title,
  body
}) => {
  const {
    name
  } = await (0,_serviceAPI_js__WEBPACK_IMPORTED_MODULE_0__/* .getUserName */ .vW)(userId);
  const article = document.querySelector('.article__wrapper');
  const breadCrumbsLink = document.querySelector('.breadcrumbs__item_active');
  breadCrumbsLink.textContent = title;
  article.innerHTML = `
        <h1 class="article__title">${title}</h1>
        <div class="article__texts">
            <p class="article__text">${body}</p>
        </div>
    
        <div class="article__footer">
            <a class="article__link" href="blog.html">
                <svg width="24" height="24" viewBox="0 0 24 24" 
                fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_114_331)">
                        <path d="M21 11H6.83L10.41 7.41L9 6L3 12L9
                            18L10.41 16.59L6.83 13H21V11Z"/>
                    </g>
                    <defs><clippath id="clip0_114_331"><rect width="24" 
                    height="24" fill="white"/></clippath></defs>
                </svg>
                <span>К списку статей</span>    
            </a>
    
            <div class="article__info">
                <p class="article__author">${name || ''}</p>
                <p class="article__date">22 октября 2021, 12:45</p>
                <div class="article__statistic">
                    <div class="article__views">
                        <img class="article__views-icon" 
                            src="./imgs/icons_eye.svg" 
                                alt="icon-eye">
                        <span class="article__views-num">1.2K</span>
                    </div>
                    <div class="article__comments">
                        <img class="article__comments-icon" 
                            src="./imgs/chat.svg" alt="comments">
                        <span class="article__comments-num">0</span>
                    </div>
                </div>
            </div>
        </div>
    `;
};
const renderModal = () => {
  const modal = document.createElement('div');
  modal.classList.add('modal');
  modal.innerHTML = `
        <div class="container modal__container">
            <div class="modal__group modal__group_catalog catalog">
                <h3 class="modal__title">Каталог</h3>
                <ul class="modal__list modal__list_catalog">
                    <li class="modal__item">
                        <a class="modal__link" href="#">Смартфоны</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Ноутбуки</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Ювелирные изделия</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Одежда</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Бытовая техника</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Бытовая химия</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Книги и журналы</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Домашний текстиль</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Электроника</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Косметика</a>
                    </li>
                </ul>
            </div>
            <div class="modal__group modal__group_customers customers">
                <h3 class="modal__title">Покупателям</h3>
                <ul class="modal__list modal__list_customers">
                    <li class="modal__item">
                        <a class="modal__link" href="#">Оплата заказа</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">Условия доставки</a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="#">
                            Условия возврата заказа
                        </a>
                    </li>
                    <li class="modal__item">
                        <a class="modal__link" href="blog.html">Блог</a>
                    </li>
                </ul>                
            </div>
            <div class="modal__group modal__group_contacts contacts">
                <h3 class="modal__title">Связаться с нами</h3>
                <ul class="modal__list modal__list_contacts">
                    <li class="modal__item modal__item_contacts">
                        <a class="modal__link modal__link_contacts" 
                            href="#contacts" aria-label="контакты">Контакты</a>
                    </li>
                </ul>                
            </div>
        </div>
    `;
  return modal;
};

/***/ }),

/***/ 63:
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Zz: function() { return /* binding */ getArticles; },
/* harmony export */   fq: function() { return /* binding */ getArticle; },
/* harmony export */   vW: function() { return /* binding */ getUserName; }
/* harmony export */ });
/* harmony import */ var _const_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(588);

const getArticles = async (renderArticles, renderPagination, controlPagination, controlArrows) => {
  const params = new URLSearchParams(window.location.search);
  if (params.has('id')) return;
  if (!window.location.pathname.includes('/blog.html')) return;
  const pageNum = params.get('page') ? params.get('page') : 1;
  try {
    const result = await fetch(`${_const_js__WEBPACK_IMPORTED_MODULE_0__/* .API_URL */ .T}/posts?page=${pageNum}`);
    const {
      data,
      meta: {
        pagination
      }
    } = await result.json();
    console.log('data: ', data);
    renderArticles(data);
    renderPagination(pagination);
    controlPagination(pagination);
    controlArrows(pagination);
  } catch (err) {
    console.log(err);
  }
};
const getArticle = async renderArticle => {
  const params = new URLSearchParams(window.location.search);
  if (!params.toString() || params.has('page')) return;
  const articleId = params.get('id');
  try {
    const result = await fetch(`${_const_js__WEBPACK_IMPORTED_MODULE_0__/* .API_URL */ .T}/posts/${articleId}`);
    const {
      data
    } = await result.json();
    console.log('data: ', data);
    renderArticle(data);
  } catch (err) {
    console.log(err);
  }
};
const getUserName = async userId => {
  try {
    const result = await fetch(`${_const_js__WEBPACK_IMPORTED_MODULE_0__/* .API_URL */ .T}/users/${userId}`);
    const {
      data
    } = await result.json();
    return data;
  } catch (err) {
    console.log(err);
  }
};

/***/ }),

/***/ 920:
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: function() { return /* binding */ findTimer; }
/* harmony export */ });
// Считаем время до дедлайна

const getTimeRemaining = deadline => {
  const dateStop = new Date(deadline);

  // отображаем время UTC +3
  const stopHours = dateStop.getHours();
  const offsetHours = -(dateStop.getTimezoneOffset() / 60);
  const UTCHours = stopHours - offsetHours;
  dateStop.setHours(UTCHours + 3);
  const dateNow = Date.now();
  const timeLeft = dateStop - dateNow;
  const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
  const hours = Math.floor(timeLeft / (1000 * 60 * 60) % 24);
  const minutes = Math.floor(timeLeft / 1000 / 60 % 60);
  const seconds = Math.floor(timeLeft / 1000 % 60);
  return {
    timeLeft,
    days,
    hours,
    minutes,
    seconds
  };
};

// Склонение дней, часов, минут, секунд

const declOfNum = (num, words) => words[num % 100 > 4 && num % 100 < 20 ? 2 : [2, 0, 1, 1, 1, 2][num % 10 < 5 ? num % 10 : 5]];

// Добавляем 0 к одиночным цифрам часа, минут, секунд

const addZero = num => `0${num}`.slice(-2);

// Создаем верстку

const createTimer = elem => {
  elem.innerHTML = `
        <p class="timer__title">До конца акции:</p>
        <div class="timer__items">
            <p class="timer__item timer__item_days">
                <span class="timer__count timer__count_days"></span>
                <span class="timer__units timer__units_days"></span>
            </p>
            <p class="timer__item timer__item_hours">
                <span class="timer__count timer__count_hours"></span>
                <span class="timer__units timer__units_hours"></span>
            </p>
            <p class="timer__item timer__item_minutes">
                <span class="timer__count timer__count_minutes"></span>
                <span class="timer__units timer__units_minutes"></span>
            </p>
            <p class="timer__item timer__item_seconds">
                <span class="timer__count timer__count_seconds"></span>
                <span class="timer__units timer__units_seconds"></span>
            </p>
        </div>
        `;
};

// функционал таймера

const timer = (deadline, elem) => {
  const timerItemDays = document.querySelector('.timer__item_days');
  const timerItemSeconds = document.querySelector('.timer__item_seconds');
  const timerCountDays = document.querySelector('.timer__count_days');
  const timerCountHours = document.querySelector('.timer__count_hours');
  const timerCountMinutes = document.querySelector('.timer__count_minutes');
  const timerCountSeconds = document.querySelector('.timer__count_seconds');
  const timerUnitsDays = document.querySelector('.timer__units_days');
  const timerUnitsHours = document.querySelector('.timer__units_hours');
  const timerUnitsMinutes = document.querySelector('.timer__units_minutes');
  const timerUnitsSeconds = document.querySelector('.timer__units_seconds');
  const startClock = () => {
    const {
      timeLeft,
      days,
      hours,
      minutes,
      seconds
    } = getTimeRemaining(deadline);

    // отображаем значения таймера на странице

    timerCountDays.textContent = days;
    timerCountHours.textContent = addZero(hours);
    timerCountMinutes.textContent = addZero(minutes);
    timerCountSeconds.textContent = addZero(seconds);

    // отображение подписей таймера в нужном падеже

    timerUnitsDays.textContent = declOfNum(days, ['день', 'дня', 'дней']);
    timerUnitsHours.textContent = declOfNum(hours, ['час', 'часа', 'часов']);
    timerUnitsMinutes.textContent = declOfNum(minutes, ['минута', 'минуты', 'минут']);
    timerUnitsSeconds.textContent = declOfNum(seconds, ['секунда', 'секунды', 'секунд']);

    // вызываем функцию каждую секунду

    const timerId = setTimeout(startClock, 1000);

    // меняем внешний вид счетчика, когда остается меньше 24 часов

    if (days === 0) {
      timerItemDays.style.display = 'none';
      timerItemSeconds.style.display = 'flex';
    } else {
      timerItemSeconds.style.display = 'none';
      timerItemDays.style.display = 'flex';
    }

    // останавливаем счетчик и удаляем таймер со страницы

    if (timeLeft <= 0) {
      clearTimeout(timerId);
      elem.innerHTML = '';
    }
  };
  startClock();
};

// запускаем плагин

const findTimer = () => {
  const dataTimer = document.querySelectorAll('[data-timer-deadline]');
  dataTimer.forEach(elem => {
    const deadline = elem.dataset.timerDeadline;
    createTimer(elem);
    timer(deadline, elem);
  });
};

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	__webpack_require__(985);
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	__webpack_require__(588);
/******/ 	__webpack_require__(377);
/******/ 	__webpack_require__(615);
/******/ 	__webpack_require__(63);
/******/ 	var __webpack_exports__ = __webpack_require__(920);
/******/ 	
/******/ })()
;